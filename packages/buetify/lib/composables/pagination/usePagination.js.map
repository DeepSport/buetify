{"version":3,"sources":["../../../src/composables/pagination/usePagination.ts"],"names":[],"mappings":"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","sourcesContent":["import { PropType, ExtractPropTypes, computed, shallowRef } from 'vue';\nimport { constEmptyArray, isNumber } from '../../utils/helpers';\nimport { getUseModelPropsDefinition, useModel } from '../model';\n\nexport const DEFAULT_ITEMS_PER_PAGE = shallowRef(25);\n\nexport const UsePaginationPropsDefinition = {\n  ...getUseModelPropsDefinition<number>(),\n  modelValue: {\n    type: Number as PropType<number>,\n    default: 0\n  },\n  total: {\n    type: Number as PropType<number>,\n    required: true\n  },\n  perPage: {\n    type: Number as PropType<number>,\n    default: () => DEFAULT_ITEMS_PER_PAGE.value,\n    validator: (value: number) => isNumber(value) && value > 0\n  },\n  items: {\n    type: Array as PropType<Array<unknown>>,\n    default: constEmptyArray\n  }\n};\n\nexport type UsePaginationProps = ExtractPropTypes<typeof UsePaginationPropsDefinition>;\n\nexport function usePagination<T>(props: UsePaginationProps) {\n  const model = useModel(props);\n  const total = computed(() => props.total ?? props.items.length);\n  const current = computed(() => Math.max(model.modelValue.value as number, 1));\n  const itemsPerPage = computed(() => (props.perPage <= 0 ? DEFAULT_ITEMS_PER_PAGE.value : props.perPage));\n  const numberOfPages = computed(() => Math.ceil(total.value / itemsPerPage.value));\n  const after = computed(() => Math.max((current.value - 1) * itemsPerPage.value, 0));\n  const nextPage = computed(() => Math.min(numberOfPages.value, current.value + 1));\n  const hasNext = computed(() => {\n    return itemsPerPage.value + after.value < total.value;\n  });\n  const previousPage = computed(() => Math.max(0, current.value - 1));\n  const hasPrevious = computed(() => after.value > 0 && total.value > 0);\n\n  const paginatedItems = computed<T[]>(\n    () => (props.items ?? []).slice(after.value, after.value + itemsPerPage.value) as T[]\n  );\n\n  function next(e: Event) {\n    console.log('here', e, current.value, hasNext.value);\n    if (hasNext.value) {\n      model.modelValue.value = nextPage.value;\n    }\n  }\n  function previous(e: Event) {\n    if (hasPrevious.value) {\n      model.modelValue.value = previousPage.value;\n    }\n  }\n  function first() {\n    model.modelValue.value = 1;\n  }\n  function last() {\n    model.modelValue.value = numberOfPages.value;\n  }\n  function set(num: number) {\n    if (num >= 1 && num <= numberOfPages.value) {\n      model.modelValue.value = num;\n    }\n  }\n  return {\n    paginatedItems,\n    current,\n    numberOfPages,\n    after,\n    nextPage,\n    hasNext,\n    previousPage,\n    hasPrevious,\n    next,\n    previous,\n    first,\n    last,\n    set\n  };\n}\n\nexport type Pagination = ReturnType<typeof usePagination>;\n\nexport function extractPaginationState(pagination: Pagination) {\n  return {\n    paginatedItems: pagination.paginatedItems.value,\n    current: pagination.current.value,\n    numberOfPages: pagination.numberOfPages.value,\n    after: pagination.after.value,\n    nextPage: pagination.nextPage.value,\n    hasNext: pagination.hasNext.value,\n    previousPage: pagination.previousPage.value,\n    hasPrevious: pagination.hasPrevious.value,\n    next: pagination.next,\n    previous: pagination.previous,\n    first: pagination.first,\n    last: pagination.last,\n    set: pagination.set\n  };\n}\n\nexport type ExtractedPaginationState = ReturnType<typeof extractPaginationState>;\n"],"sourceRoot":"","file":"usePagination.js"}