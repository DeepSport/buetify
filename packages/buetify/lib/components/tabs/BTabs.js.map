{"version":3,"sources":["../../../src/components/tabs/BTabs.ts"],"names":[],"mappings":"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","sourcesContent":["import '../../sass/helpers/animations.sass';\nimport '../../sass/helpers/flex-helpers.sass';\nimport '../../sass/helpers/padding-margin-helpers.sass';\nimport './tabs.sass';\nimport { lookup } from 'fp-ts/Array';\nimport { pipe } from 'fp-ts/function';\nimport { map } from 'fp-ts/Option';\nimport { getUseModelPropsDefinition, Model, useModel } from '../../composables/model';\nimport { useThemePropsDefinition, useTheme } from '../../composables/theme';\nimport { AllColorsVariant } from '../../types/ColorVariants';\nimport BScroll from '../scroll/BScroll';\nimport {\n  shallowReactive,\n  PropType,\n  h,\n  shallowRef,\n  provide,\n  ExtractPropTypes,\n  Ref,\n  nextTick,\n  defineComponent,\n  VNode,\n  onBeforeMount,\n  computed,\n  SetupContext,\n  TransitionGroup,\n  cloneVNode,\n  withDirectives,\n  vShow\n} from 'vue';\n\nimport { BTabItemProps, TabInjection, TABS_SYMBOL } from './shared';\nimport { TabsThemeMap } from './theme';\n\nexport type TabsPosition = 'is-centered' | 'is-right' | '';\n\nexport type TabsType = 'is-boxed' | 'is-toggle' | 'is-toggle-rounded' | '';\n\nexport type TabsSize = 'is-small' | 'is-medium' | 'is-large' | '';\n\ntype TabTransition = 'slide-next' | 'slide-prev';\n\nexport const BTabsPropsDefinition = {\n  ...getUseModelPropsDefinition<number>(),\n  ...useThemePropsDefinition(TabsThemeMap),\n  isExpanded: {\n    type: Boolean as PropType<boolean>,\n    default: false\n  },\n  type: {\n    type: String as PropType<TabsType>,\n    default: '' as const\n  },\n  size: {\n    type: String as PropType<TabsSize>,\n    default: '' as const\n  },\n  position: {\n    type: String as PropType<TabsPosition>,\n    default: '' as const\n  },\n  label: {\n    type: String as PropType<string>\n  },\n  variant: {\n    type: String as PropType<AllColorsVariant>,\n    default: '' as const\n  },\n  isAnimated: {\n    type: Boolean as PropType<boolean>,\n    default: true\n  },\n  isScrollable: {\n    type: Boolean as PropType<boolean>,\n    default: false\n  },\n  isVertical: {\n    type: Boolean as PropType<boolean>,\n    default: false\n  }\n};\n\nexport type BTabsProps = ExtractPropTypes<typeof BTabsPropsDefinition>;\n\nfunction useOnTabItemClick(tab: BTabItemProps, index: number, model: Model<number>, transition: Ref<TabTransition>) {\n  return () => {\n    const val = model.modelValue.value || 0;\n    if (val !== index) {\n      transition.value = index < val ? 'slide-next' : 'slide-prev';\n      nextTick(() => {\n        model.modelValue.value = index;\n      });\n    }\n  };\n}\n\nfunction useGenerateNavItem(props: BTabsProps, model: Model<number>, transition: Ref<TabTransition>) {\n  return function generateNavItem(tab: BTabItemProps, index: number): VNode {\n    return withDirectives(\n      h(\n        'li',\n        {\n          key: tab.label,\n          class: [\n            {\n              'is-active': index === model.modelValue.value,\n              'is-disabled': tab.isDisabled\n            }\n          ]\n        },\n        [\n          h(\n            'a',\n            { onClick: useOnTabItemClick(tab, index, model, transition) },\n            tab.icon\n              ? [\n                  h(tab.icon as any, {\n                    size: props.size\n                  }),\n                  tab.label\n                ]\n              : tab.label\n          )\n        ]\n      ),\n      [[vShow, tab.isVisible]]\n    );\n  };\n}\n\nfunction generateNavLabel(props: BTabsProps): VNode {\n  return h(\n    'label',\n    {\n      class: ['label is-marginless align-self-center', props.size]\n    },\n    props.label\n  );\n}\n\nfunction generateNavItems(\n  props: BTabsProps,\n  tabs: BTabItemProps[],\n  model: Model<number>,\n  transition: Ref<TabTransition>\n) {\n  return h('ul', tabs.map(useGenerateNavItem(props, model, transition)));\n}\n\nfunction generateNavHeaderContent(\n  props: BTabsProps,\n  tabs: BTabItemProps[],\n  model: Model<number>,\n  transition: Ref<TabTransition>,\n  themeClasses: string[]\n): VNode {\n  return h(\n    'nav',\n    {\n      class: [\n        'tabs',\n        props.type,\n        props.size,\n        props.position,\n        {\n          'is-fullwidth': !!props.isExpanded || !!props.isScrollable,\n          'is-toggle-rounded is-toggle': props.type === 'is-toggle-rounded'\n        }\n      ].concat(props.variant === '' ? themeClasses : [props.variant])\n    },\n    props.label\n      ? [generateNavLabel(props), generateNavItems(props, tabs, model, transition)]\n      : [generateNavItems(props, tabs, model, transition)]\n  );\n}\n\nfunction generateNavHeader(\n  props: BTabsProps,\n  tabs: BTabItemProps[],\n  model: Model<number>,\n  transition: Ref<TabTransition>,\n  themeClasses: string[]\n): VNode {\n  return props.isScrollable\n    ? h(BScroll, { class: props.isVertical ? 'is-fullheight' : 'is-fullwidth' }, () => [\n        generateNavHeaderContent(props, tabs, model, transition, themeClasses)\n      ])\n    : generateNavHeaderContent(props, tabs, model, transition, themeClasses);\n}\n\nfunction BStaticTabContent(_: unknown, { slots }: SetupContext) {\n  return h('div', { class: 'tab-content' }, slots.default && slots.default());\n}\n\nexport default defineComponent({\n  name: 'b-tabs',\n  props: BTabsPropsDefinition,\n  setup(props, context) {\n    const { themeClasses } = useTheme(props);\n    const model = useModel(props);\n    const transition = shallowRef('slide-next' as 'slide-next' | 'slide-prev');\n    const tabs = shallowReactive([] as BTabItemProps[]);\n    const isTransitioning = shallowRef(false);\n    const activeLabel = computed(() =>\n      pipe(\n        tabs,\n        lookup(model.modelValue.value || 0),\n        map(p => p.label)\n      )\n    );\n\n    const injection: TabInjection = {\n      activeLabel,\n      tabs\n    };\n\n    provide(TABS_SYMBOL, injection);\n\n    onBeforeMount(() => {\n      if (model.modelValue.value === undefined) {\n        model.modelValue.value = 0;\n      }\n    });\n\n    function onBeforeEnter() {\n      isTransitioning.value = true;\n    }\n\n    function onAfterLeave() {\n      isTransitioning.value = false;\n    }\n\n    return () => {\n      return h(\n        'article',\n        {\n          class: [\n            'b-tabs',\n            props.size || null,\n            {\n              'is-vertical': props.isVertical,\n              [props.position]: props.position && props.isVertical\n            }\n          ]\n        },\n        [\n          generateNavHeader(props, tabs, model, transition, themeClasses.value),\n          props.isAnimated\n            ? h(\n                'div',\n                {\n                  class: ['tab-content', { 'is-transitioning': isTransitioning.value }]\n                },\n                h(\n                  TransitionGroup,\n                  {\n                    onBeforeEnter,\n                    onAfterLeave,\n                    name: transition.value\n                  },\n                  () =>\n                    context.slots.default &&\n                    context.slots.default().map((node, index) => cloneVNode(node, { key: tabs[index]?.label ?? index }))\n                )\n              )\n            : h(BStaticTabContent, context.slots.default)\n        ]\n      );\n    };\n  }\n});\n"],"sourceRoot":"","file":"BTabs.js"}