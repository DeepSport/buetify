{"version":3,"sources":["../../../src/components/sidebar/BSidebar.ts"],"names":[],"mappings":"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","sourcesContent":["import './sidebar.sass';\nimport { useThemePropsDefinition, useTheme } from '../../composables/theme';\nimport { useWindowSize } from '../../composables/windowSize';\nimport { SlideRightTransition } from '../../transitions/slideRightTransition';\nimport {\n  defineComponent,\n  SetupContext,\n  VNode,\n  h,\n  PropType,\n  computed,\n  watch,\n  toRef,\n  ExtractPropTypes,\n  withDirectives,\n  vShow\n} from 'vue';\nimport BOverlay from '../overlay/BOverlay';\nimport { SidebarController, useSidebarController } from './composables';\nimport { SidebarThemeMap } from './theme';\n\nexport const BSidebarPropsDefinition = {\n  ...useThemePropsDefinition(SidebarThemeMap),\n  tag: {\n    type: String as PropType<string>,\n    default: 'nav'\n  },\n  currentRoute: {\n    required: false\n  }\n};\n\nexport type BNavigationDrawerProps = ExtractPropTypes<typeof BSidebarPropsDefinition>;\n\nfunction generateDrawer(\n  props: BNavigationDrawerProps,\n  controller: SidebarController,\n  themeClasses: string[],\n  context: SetupContext\n): VNode {\n  return h(\n    props.tag,\n    {\n      class: ['b-sidebar', ...themeClasses]\n    },\n    context.slots.default &&\n      context.slots.default({\n        showSidebar: controller.show,\n        hideSidebar: controller.hide,\n        sidebarIsVisible: controller.isVisible.value,\n        toggleSidebar: controller.toggle\n      })\n  );\n}\n\nfunction generateMobileDrawer(\n  props: BNavigationDrawerProps,\n  controller: SidebarController,\n  themeClasses: string[],\n  context: SetupContext\n): VNode {\n  return h(SlideRightTransition, undefined, () =>\n    withDirectives(\n      h(\n        BOverlay,\n        {\n          class: 'is-left',\n          isActive: controller.isVisible.value,\n          onClick: controller.hide\n        },\n        () => generateDrawer(props, controller, themeClasses, context)\n      ),\n      [[vShow, controller.isVisible.value]]\n    )\n  );\n}\n\nexport default defineComponent({\n  name: 'b-sidebar',\n  props: BSidebarPropsDefinition,\n  setup(props, context) {\n    const controller = useSidebarController();\n    const windowSize = useWindowSize();\n    const { themeClasses } = useTheme(props);\n    const useSideDrawer = computed(() => {\n      return windowSize.value.isTouch || windowSize.value.isDesktop;\n    });\n    watch(\n      useSideDrawer,\n      (newValue, oldValue) => {\n        if (newValue === oldValue && oldValue !== undefined) {\n          return;\n        }\n        if (newValue) {\n          controller.hide();\n        } else {\n          controller.show();\n        }\n      },\n      { immediate: true }\n    );\n    watch(\n      toRef(props, 'currentRoute'),\n      newVal => {\n        if (useSideDrawer.value) {\n          controller.hide();\n        }\n      },\n      {\n        deep: false\n      }\n    );\n    return () => {\n      if (useSideDrawer.value) {\n        return generateMobileDrawer(props, controller, themeClasses.value, context);\n      } else {\n        return generateDrawer(props, controller, themeClasses.value, context);\n      }\n    };\n  }\n});\n"],"sourceRoot":"","file":"BSidebar.js"}