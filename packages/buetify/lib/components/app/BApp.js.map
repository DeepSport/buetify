{"version":3,"sources":["../../../src/components/app/BApp.ts"],"names":[],"mappings":"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","sourcesContent":["import '../../sass/helpers/animations.sass';\nimport './app.sass';\nimport { defineComponent, shallowRef, h, Slots, Ref, vShow, withDirectives, VNode } from 'vue';\nimport { provideNoticeController, ShowNoticeOptions } from '../../composables/noticeController';\nimport { providePopupController, ShowPopupOptions } from '../../composables/popupController';\nimport { provideTheme, ProvideThemePropDefinitions } from '../../composables/theme';\nimport { formatTransition } from '../../composables/transition';\nimport { provideWindowSize, ProvideWindowSizePropsDefinition } from '../../composables/windowSize';\nimport { TransitionClasses } from '../../types/Transition';\nimport BSidebar from '../sidebar/BSidebar';\nimport BNoticeContainer, { NoticeContainer, NoticeOptions } from '../notices/noticeContainer/BNoticeContainer';\nimport BPopupContainer, { PopupContainer } from '../popupContainer/BPopupContainer';\nimport {\n  provideSidebarController,\n  ProvideSidebarControllerPropsDefinition,\n  SidebarController\n} from '../sidebar/composables';\n\nconst DEFAULT_TRANSITION: TransitionClasses = { name: 'fade' };\n\nfunction generateNoticeContainer(placement: 'top' | 'bottom', ref: Ref<NoticeContainer>) {\n  return h(BNoticeContainer, { ref, class: placement === 'top' ? 'notices-is-top' : 'notices-is-bottom' });\n}\n\nfunction generatePopupContainer(ref: Ref<PopupContainer>) {\n  return h(BPopupContainer, { ref });\n}\n\nfunction generateSidebarSlot(\n  slots: Slots,\n  hasHeader: boolean,\n  currentRoute: unknown | undefined,\n  sidebar: SidebarController\n) {\n  return h(\n    BSidebar,\n    {\n      currentRoute,\n      isFullheight: true\n    },\n    () => slots.sidebar && slots.sidebar(sidebar)\n  );\n}\n\nfunction generateBodyContent(\n  slots: Slots,\n  hasNavigationDrawer: boolean,\n  sidebar: SidebarController,\n  currentRoute: unknown | undefined\n) {\n  const nodes: Array<VNode | VNode[]> = [];\n  if (slots.header) {\n    const header = slots.header(sidebar);\n    if (header) nodes.push(header);\n  }\n  nodes.push(\n    h(\n      'div',\n      { class: 'b-app-body-content' },\n      hasNavigationDrawer\n        ? [\n            withDirectives(generateSidebarSlot(slots, !!slots.header, currentRoute, sidebar), [\n              [vShow, sidebar.isVisible.value]\n            ]),\n            h('div', { class: 'b-app-content' }, slots.default!(sidebar))\n          ]\n        : [h('div', { class: 'b-app-content' }, slots.default!(sidebar))]\n    )\n  );\n  return nodes;\n}\n\nexport default defineComponent({\n  name: 'b-app',\n  props: {\n    ...ProvideThemePropDefinitions,\n    ...ProvideWindowSizePropsDefinition,\n    ...ProvideSidebarControllerPropsDefinition\n  },\n  setup(props, { slots }) {\n    const popup = shallowRef((null as unknown) as PopupContainer);\n    const top = shallowRef((null as unknown) as NoticeContainer);\n    const bottom = shallowRef((null as unknown) as NoticeContainer);\n\n    function showNotice(params: ShowNoticeOptions) {\n      const options: NoticeOptions = {\n        ...params,\n        transition: params.transition ? formatTransition(params.transition) : DEFAULT_TRANSITION\n      };\n      return params.placement === 'top' ? top.value.showNotice(options) : bottom.value.showNotice(options);\n    }\n\n    function showPopup(params: ShowPopupOptions) {\n      return popup.value.showPopup({\n        render: params.render,\n        transition: params.transition ? formatTransition(params.transition) : DEFAULT_TRANSITION\n      });\n    }\n    provideTheme(props);\n    provideNoticeController(showNotice);\n    providePopupController(showPopup);\n    provideWindowSize(props);\n    const sidebarController = provideSidebarController(props);\n\n    return () => {\n      const hasNavigationDrawer = !!slots['sidebar'];\n      const nodes = [\n        generateNoticeContainer('top', top),\n        generateNoticeContainer('bottom', bottom),\n        generatePopupContainer(popup)\n      ];\n\n      nodes.push(\n        h(\n          'div',\n          {\n            class: [\n              'b-app',\n              {\n                'has-navigation-drawer': hasNavigationDrawer && sidebarController.isVisible.value,\n                'has-header': !!slots.header\n              }\n            ]\n          },\n          generateBodyContent(slots, hasNavigationDrawer, sidebarController, props.currentRoute)\n        )\n      );\n\n      return h('div', nodes);\n    };\n  }\n});\n"],"sourceRoot":"","file":"BApp.js"}