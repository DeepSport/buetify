{"version":3,"sources":["../../../../src/components/form/field/BField.ts"],"names":[],"mappings":"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","sourcesContent":["import '../sass/tools.sass';\nimport { constant } from 'fp-ts/lib/function';\nimport { FieldDataAttrs, provideFieldData, ProvideFieldDataPropsDefinition } from '../../../composables/fieldData';\nimport { DefaultThemePropsDefinition } from '../../../composables/theme';\nimport {\n  h,\n  PropType,\n  VNode,\n  defineComponent,\n  computed,\n  ExtractPropTypes,\n  shallowRef,\n  watch,\n  Slots,\n  SetupContext\n} from 'vue';\nimport { AllColorsVariant } from '../../../types/ColorVariants';\nimport { Classes } from '../../../utils/mergeClasses';\n\nexport type FieldPosition = 'is-left' | 'is-centered' | 'is-right';\n\nfunction useRootClasses(props: BFieldProps): Classes {\n  return {\n    'is-expanded': props.isExpanded,\n    'is-horizontal': props.isHorizontal\n  };\n}\n\nfunction useFieldType(isGrouped: boolean, hasAddons: boolean): string {\n  return isGrouped ? 'is-grouped' : hasAddons ? 'has-addons' : '';\n}\n\nfunction useInnerFieldClasses(props: BFieldProps, fieldType: string): Classes {\n  const isGrouped = props.isGrouped;\n  const position = props.position;\n  return [\n    fieldType,\n    {\n      'flex-grow-1': props.isExpanded,\n      'is-grouped-multiline': props.isGroupedMultiline,\n      'is-horizontal': props.isHorizontal,\n      'is-grouped-centered': isGrouped && position === 'is-centered',\n      'is-grouped-right': isGrouped && position === 'is-right',\n      'has-addons-centered': !isGrouped && position === 'is-centered',\n      'has-addons-right': !isGrouped && position === 'is-right'\n    }\n  ];\n}\n\nexport const BFieldPropsDefinition = {\n  ...DefaultThemePropsDefinition,\n  ...ProvideFieldDataPropsDefinition,\n  isGrouped: {\n    type: Boolean as PropType<boolean>,\n    default: false\n  },\n  isGroupedMultiline: {\n    type: Boolean as PropType<boolean>,\n    default: false\n  },\n  position: {\n    type: String as PropType<FieldPosition>,\n    default: 'is-left'\n  },\n  isHorizontal: {\n    type: Boolean as PropType<boolean>,\n    default: false\n  },\n  hasAddons: {\n    type: Boolean as PropType<boolean>,\n    default: true\n  },\n  customLabelClass: {\n    type: String as PropType<string>,\n    default: ''\n  }\n};\n\nexport type BFieldProps = ExtractPropTypes<typeof BFieldPropsDefinition>;\n\nfunction generateInnerLabel(fieldData: FieldDataAttrs, customClass: string): VNode {\n  return h(\n    'label',\n    {\n      class: ['label', customClass],\n      id: fieldData.labelId.value,\n      for: fieldData.id.value\n    },\n\n    fieldData.label.value\n  );\n}\n\nfunction generateHorizontalLabel(fieldData: FieldDataAttrs, customClass: string, size: string): VNode {\n  return h('div', { class: ['field-label', size] }, [generateInnerLabel(fieldData, customClass)]);\n}\n\nfunction generateLabel(isHorizontal: boolean, fieldData: FieldDataAttrs, customClass: string, size: string): VNode[] {\n  const label = fieldData.label.value;\n  if (isHorizontal && !!label) {\n    return [generateHorizontalLabel(fieldData, customClass, size)];\n  } else if (!isHorizontal && !!label) {\n    return [generateInnerLabel(fieldData, customClass)];\n  } else {\n    return [];\n  }\n}\n\nfunction generateHelpMessage(isHorizontal: boolean, fieldDataAttrs: FieldDataAttrs): VNode | undefined {\n  return !isHorizontal && !!fieldDataAttrs.message.value\n    ? h('p', {\n        class: ['help', fieldDataAttrs.messageVariant.value],\n        innerHTML: fieldDataAttrs.message.value\n      })\n    : undefined;\n}\n\nfunction generateBody(\n  props: BFieldProps,\n  fieldData: FieldDataAttrs,\n  role: string,\n  hasInnerField: boolean,\n  fieldType: string,\n  slots: Slots\n): VNode[] {\n  if (props.isHorizontal) {\n    return [\n      h(\n        BFieldBody, // eslint-disable-line\n        {\n          class: { 'is-expanded': fieldData.isExpanded.value },\n          message: fieldData.message.value,\n          variant: fieldData.messageVariant.value,\n          role\n        },\n        slots.default\n      )\n    ];\n  } else if (hasInnerField) {\n    return [\n      h(\n        'div',\n        {\n          class: 'field-body'\n        },\n        [\n          h(\n            BField, // eslint-disable-line\n            {\n              hasAddons: false,\n              variant: fieldData.messageVariant.value,\n              class: useInnerFieldClasses(props, fieldType)\n            },\n            slots.default\n          )\n        ]\n      )\n    ];\n  } else {\n    return slots.default ? slots.default() : [];\n  }\n}\n\nconst BField = defineComponent({\n  name: 'b-field',\n  props: BFieldPropsDefinition,\n  setup(props, { slots }) {\n    const field = shallowRef((null as unknown) as HTMLElement);\n    const fieldData = provideFieldData(props);\n    const role = computed(() => (props.isGrouped ? 'group' : ''));\n    const size = shallowRef('');\n    watch(field, newVal => {\n      if (props.isHorizontal && newVal) {\n        // Bulma docs: .is-normal for any .input or .button\n        const elements = newVal.querySelectorAll('.input, .select, .button, .textarea');\n        if (elements.length > 0) {\n          size.value = 'is-normal';\n        }\n      }\n    });\n    return () => {\n      const hasAddons = !!(props.hasAddons && !props.isHorizontal && slots.default && slots.default().length > 1);\n      const hasInnerField = props.isGrouped || props.isGroupedMultiline || hasAddons;\n\n      const nodes: Array<VNode | undefined> = [\n        ...generateLabel(props.isHorizontal, fieldData.attrs, props.customLabelClass, size.value),\n        ...generateBody(\n          props,\n          fieldData.attrs,\n          role.value,\n          hasInnerField,\n          useFieldType(props.isGrouped, hasAddons),\n          slots\n        ),\n        generateHelpMessage(props.isHorizontal, fieldData.attrs)\n      ];\n\n      return h(\n        'div',\n        {\n          ref: field,\n          class: ['field', useRootClasses(props)],\n          role: role.value\n        },\n        nodes\n      );\n    };\n  }\n});\n\nexport interface BFieldBodyProps {\n  message?: string;\n  variant?: AllColorsVariant;\n  tag?: string;\n}\n\n// eslint-disable-next-line\nfunction BFieldBody(props: BFieldBodyProps, { attrs, slots }: SetupContext) {\n  const nodes = slots.default ? slots.default() : [];\n  return h(\n    props.tag ?? 'div',\n    {\n      class: 'field-body'\n    },\n    nodes.map((element: VNode) => (element.el ? element : h(BField, props, constant(element))))\n  );\n}\n\nexport default BField;\n"],"sourceRoot":"","file":"BField.js"}