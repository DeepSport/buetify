{"version":3,"sources":["../../../../src/components/notices/notification/BNotification.ts"],"names":[],"mappings":"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","sourcesContent":["import '../../../sass/helpers/animations.sass';\nimport '../sass/notices.sass';\nimport { constant, FunctionN } from 'fp-ts/lib/function';\nimport { IO } from 'fp-ts/lib/IO';\nimport { Message, useMessage, UseMessagePropsDefinition } from '../../../composables/message';\nimport {\n  NoticeController,\n  OpenNoticeOptions,\n  RenderNoticeOptions,\n  useNoticeController,\n  UseNoticePropsDefinition\n} from '../../../composables/noticeController';\nimport { formatTransition } from '../../../composables/transition';\nimport {\n  Transition,\n  VNode,\n  h,\n  PropType,\n  defineComponent,\n  ExtractPropTypes,\n  shallowRef,\n  withDirectives,\n  SetupContext,\n  vShow,\n  Component\n} from 'vue';\nimport { constEmptyArray } from '../../../utils/helpers';\n\nexport const BNotificationPropsDefinition = {\n  ...UseMessagePropsDefinition,\n  ...UseNoticePropsDefinition,\n  isNotice: {\n    type: Boolean as PropType<boolean>,\n    default: false\n  },\n  icon: {\n    type: Object as PropType<Component>\n  }\n};\n\nexport type BNotificationProps = ExtractPropTypes<typeof BNotificationPropsDefinition>;\n\nfunction generateCloseButton(\n  props: BNotificationProps,\n  messageController: Message,\n  noticeController: NoticeController\n): VNode {\n  return h('button', {\n    class: 'delete',\n    onClick: props.isNotice ? noticeController.close : messageController.setOff\n  });\n}\n\nfunction generateIcon(messageController: Message): VNode {\n  return h('div', { class: 'media-left' }, [\n    h(messageController.icon.value as any, { size: messageController.iconSize.value })\n  ]);\n}\n\nfunction generateNoticeContent(context: SetupContext, message?: string): VNode {\n  return h('div', { class: 'media-content' }, (context.slots.default && context.slots.default()) || h('p', message));\n}\n\nfunction generateNoticeBody(\n  props: BNotificationProps,\n  context: SetupContext,\n  messageController: Message,\n  noticeController: NoticeController,\n  message?: string\n): VNode {\n  return h(\n    'div',\n    { class: 'media' },\n    props.useIcon && messageController.icon.value\n      ? [generateIcon(messageController), generateNoticeContent(context, message)]\n      : [generateNoticeContent(context, message)]\n  );\n}\n\nfunction getGenerateNotice(\n  props: BNotificationProps,\n  context: SetupContext,\n  messageController: Message,\n  noticeController: NoticeController\n) {\n  return (options: OpenNoticeOptions) => () => {\n    const notice = h(\n      'article',\n      {\n        class: ['notification', options.variant ?? props.variant, options.position ?? props.position]\n      },\n      props.isClosable\n        ? [\n            generateCloseButton(props, messageController, noticeController),\n            generateNoticeBody(props, context, messageController, noticeController, options.message ?? props.message)\n          ]\n        : [generateNoticeBody(props, context, messageController, noticeController, options.message ?? props.message)]\n    );\n    return props.isNotice ? [notice] : [withDirectives(notice, [[vShow, messageController.isOn.value]])];\n  };\n}\n\nexport default defineComponent({\n  name: 'b-notification',\n  props: BNotificationPropsDefinition,\n  setup(props, context) {\n    const renderNotification = shallowRef(constant(constEmptyArray) as FunctionN<[RenderNoticeOptions], IO<VNode[]>>);\n    const noticeController = useNoticeController(props, renderNotification);\n    const messageController = useMessage(props);\n    renderNotification.value = getGenerateNotice(props, context, messageController, noticeController);\n    return () =>\n      props.isNotice\n        ? context.slots.trigger && context.slots.trigger({ open: noticeController.open, close: noticeController.close })\n        : h(Transition, props.transition ? formatTransition(props.transition) : {}, renderNotification.value({}));\n  }\n});\n"],"sourceRoot":"","file":"BNotification.js"}