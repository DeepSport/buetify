{"version":3,"sources":["../../../src/components/steps/BSteps.ts"],"names":[],"mappings":"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","sourcesContent":["import './steps.sass';\nimport { lookup } from 'fp-ts/Array';\nimport { pipe } from 'fp-ts/function';\nimport { getUseModelPropsDefinition, Model, useModel } from '../../composables/model';\nimport { DefaultThemePropsDefinition, useTheme } from '../../composables/theme';\nimport { ColorVariant } from '../../types/ColorVariants';\nimport { map } from 'fp-ts/lib/Option';\nimport {\n  computed,\n  cloneVNode,\n  TransitionGroup,\n  Ref,\n  defineComponent,\n  nextTick,\n  VNode,\n  PropType,\n  h,\n  ExtractPropTypes,\n  provide,\n  shallowRef,\n  withDirectives,\n  vShow,\n  shallowReactive,\n  SetupContext\n} from 'vue';\nimport { BStepItemProps, StepInjection, STEPS_SYMBOL } from './shared';\n\nexport type StepsSize = 'is-small' | 'is-medium' | 'is-large' | '';\n\ntype StepTransition = 'slide-next' | 'slide-prev';\n\nexport type StepsPosition = 'is-right' | '';\n\nexport type StepLabelPosition = 'is-right' | 'is-left' | '';\n\nexport type StepsMobileMode = 'minimal' | 'compact' | '';\n\nexport const BStepsPropsDefinition = {\n  ...getUseModelPropsDefinition<number>(),\n  ...DefaultThemePropsDefinition,\n  position: {\n    type: String as PropType<StepsPosition>,\n    default: '' as const\n  },\n  labelPosition: {\n    type: String as PropType<StepLabelPosition>,\n    default: ''\n  },\n  variant: {\n    type: String as PropType<ColorVariant>,\n    default: '' as const\n  },\n  size: {\n    type: String as PropType<StepsSize>,\n    default: '' as const\n  },\n  isAnimated: {\n    type: Boolean as PropType<boolean>,\n    default: true\n  },\n  mobileMode: {\n    type: String as PropType<StepsMobileMode>,\n    default: 'minimal' as const\n  },\n  isRounded: {\n    type: Boolean,\n    default: true\n  },\n  isVertical: {\n    type: Boolean,\n    default: false\n  }\n};\n\nexport type BStepsProps = ExtractPropTypes<typeof BStepsPropsDefinition>;\n\nfunction getOnStepItemClick(index: number, model: Model<number>, transition: Ref<StepTransition>) {\n  return () => {\n    const val = model.modelValue.value || 0;\n    if (val !== index) {\n      transition.value = index < val ? 'slide-next' : 'slide-prev';\n      nextTick().then(() => {\n        model.modelValue.value = index;\n      });\n    }\n  };\n}\n\nfunction getGenerateNavItem(\n  props: BStepsProps,\n  model: Model<number>,\n  injection: StepInjection,\n  transition: Ref<StepTransition>\n) {\n  return function generateNavItem(step: BStepItemProps, index: number): VNode {\n    const currentIndex = model.modelValue.value || 0;\n    const isClickable = step.isClickable ?? index < currentIndex;\n    return withDirectives(\n      h(\n        'li',\n        {\n          key: step.label,\n          class: [\n            step.variant || props.variant,\n            'step-item',\n            {\n              'is-previous': index < currentIndex,\n              'is-active': index === model.modelValue.value\n            }\n          ]\n        },\n        [\n          h(\n            'a',\n            {\n              class: [\n                'step-link',\n                {\n                  'is-clickable': isClickable\n                }\n              ],\n              onClick: isClickable ? getOnStepItemClick(index, model, transition) : undefined\n            },\n            [\n              h(\n                'div',\n                { class: 'step-marker' },\n                step.icon ? h(step.icon as any, { size: props.size }) : step.step ?? `${index + 1}`\n              ), //eslint-disable-line\n              h('div', { class: 'step-details' }, [h('span', { class: 'step-title' }, step.label)])\n            ]\n          )\n        ]\n      ),\n      [[vShow, injection.steps[index]?.isVisible ?? true]]\n    );\n  };\n}\n\nfunction generateNavHeader(\n  props: BStepsProps,\n  model: Model<number>,\n  injection: StepInjection,\n  transition: Ref<StepTransition>,\n  themeClasses: string[]\n): VNode {\n  return h(\n    'nav',\n    {\n      class: [\n        'steps',\n        props.size,\n        props.variant || null,\n        {\n          'is-rounded': props.isRounded,\n          'is-animated': props.isAnimated,\n          'has-label-right': props.labelPosition === 'is-right',\n          'has-label-left': props.labelPosition === 'is-left',\n          'mobile-minimalist': props.mobileMode === 'minimal',\n          'mobile-compact': props.mobileMode === 'compact'\n        },\n        ...themeClasses\n      ]\n    },\n    h('ul', { class: ['step-items'] }, injection.steps.map(getGenerateNavItem(props, model, injection, transition)))\n  );\n}\n\nfunction BStaticStepContent(_: unknown, { slots }: SetupContext) {\n  return h('div', { class: 'step-content' }, slots.default && slots.default());\n}\n\nexport default defineComponent({\n  name: 'b-steps',\n  props: BStepsPropsDefinition,\n  setup(props, context) {\n    const { themeClasses } = useTheme(props);\n    const model = useModel(props);\n    const transition = shallowRef('slide-next' as 'slide-next' | 'slide-prev');\n    const steps = shallowReactive([] as BStepItemProps[]);\n    const isTransitioning = shallowRef(false);\n    const activeLabel = computed(() =>\n      pipe(\n        steps,\n        lookup(model.modelValue.value || 0),\n        map(p => p.label)\n      )\n    );\n    const injection: StepInjection = {\n      activeLabel,\n      steps\n    };\n\n    provide(STEPS_SYMBOL, injection);\n\n    function onBeforeEnter() {\n      isTransitioning.value = true;\n    }\n\n    function onAfterLeave() {\n      isTransitioning.value = false;\n    }\n\n    return () => {\n      return h(\n        'article',\n        {\n          class: [\n            'b-steps',\n            props.size || null,\n            {\n              'is-vertical': props.isVertical,\n              [props.position]: props.position && props.isVertical\n            }\n          ]\n        },\n        [\n          generateNavHeader(props, model, injection, transition, themeClasses.value),\n          props.isAnimated\n            ? h(\n                'div',\n                {\n                  class: ['step-content', { 'is-transitioning': isTransitioning.value }]\n                },\n                h(\n                  TransitionGroup,\n                  {\n                    onBeforeEnter,\n                    onAfterLeave,\n                    name: transition.value\n                  },\n                  () =>\n                    context.slots.default &&\n                    context.slots\n                      .default()\n                      .map((node, index) => cloneVNode(node, { key: steps[index]?.label ?? index }))\n                )\n              )\n            : h(BStaticStepContent, context.slots.default)\n        ]\n      );\n    };\n  }\n});\n"],"sourceRoot":"","file":"BSteps.js"}