{"version":3,"sources":["../../../src/components/pagination/BPagination.ts"],"names":[],"mappings":"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","sourcesContent":["import './pagination.sass';\nimport {\n  extractPaginationState,\n  Pagination,\n  usePagination,\n  UsePaginationPropsDefinition\n} from '../../composables/pagination';\nimport { DefaultThemePropsDefinition, useTheme } from '../../composables/theme';\nimport AngleLeftIcon from '../icons/angleLeft/AngleLeftIcon';\nimport AngleRightIcon from '../icons/angleRight/AngleRightIcon';\nimport { range } from 'fp-ts/lib/Array';\nimport { VNode, PropType, defineComponent, ExtractPropTypes, h, SetupContext } from 'vue';\n\nexport type PaginationSize = 'is-small' | 'is-medium' | 'is-large' | '';\n\nexport type PaginationPosition = 'is-centered' | 'is-right' | '';\n\nexport type PaginationVerticalPosition = 'is-top' | '';\n\nexport const BPaginationPropsDefinition = {\n  ...UsePaginationPropsDefinition,\n  ...DefaultThemePropsDefinition,\n  size: {\n    type: String as PropType<PaginationSize>,\n    default: '' as const\n  },\n  isSimple: {\n    type: Boolean as PropType<boolean>,\n    default: false\n  },\n  isRounded: {\n    type: Boolean as PropType<boolean>,\n    default: false\n  },\n  position: {\n    type: String as PropType<PaginationPosition>,\n    default: '' as const\n  },\n  verticalPosition: {\n    type: String as PropType<PaginationVerticalPosition>,\n    default: '' as const\n  }\n};\n\nexport type BPaginationProps = ExtractPropTypes<typeof BPaginationPropsDefinition>;\n\nfunction getAriaLabel(num: number, total: number): string {\n  return `Go to page ${num} of ${total}`;\n}\n\nconst ellipsis = h('li', [\n  h('span', {\n    class: 'pagination-ellipsis',\n    innerHTML: `&hellip;`\n  })\n]);\n\nfunction generatePreviousButton(context: SetupContext, pagination: Pagination, themeClasses: string[]): VNode {\n  return h(\n    'button',\n    {\n      class: ['pagination-previous', ...themeClasses],\n      disabled: !pagination.hasPrevious.value,\n      'aria-label': getAriaLabel(pagination.previousPage.value, pagination.numberOfPages.value),\n      onClick: pagination.previous\n    },\n    context.slots.previous ? context.slots.previous() : h(AngleLeftIcon)\n  );\n}\n\nfunction generateNextButton(context: SetupContext, pagination: Pagination, themeClasses: string[]): VNode {\n  return h(\n    'button',\n    {\n      class: ['pagination-next', ...themeClasses],\n      disabled: !pagination.hasNext.value,\n      'aria-label': getAriaLabel(pagination.nextPage.value, pagination.numberOfPages.value),\n      onClick: pagination.next\n    },\n    context.slots.next ? context.slots.next() : h(AngleRightIcon)\n  );\n}\n\nfunction getGeneratePaginationListItem(pagination: Pagination, themeClasses: string[]) {\n  return (page: Page) =>\n    h(\n      'li',\n      {\n        key: page.number\n      },\n      [\n        h(\n          'button',\n          {\n            class: ['pagination-link', ...themeClasses, { 'is-current': page.isCurrent }],\n            'aria-label': getAriaLabel(page.number, pagination.numberOfPages.value),\n            'aria-current': page.isCurrent,\n            onClick: (e: MouseEvent) => {\n              e.preventDefault();\n              pagination.set(page.number);\n            }\n          },\n          `${page.number}`\n        )\n      ]\n    );\n}\n\nfunction getPageRange(props: BPaginationProps, pagination: Pagination): Page[] {\n  if (props.isSimple) {\n    return [];\n  } else {\n    const currentValue = pagination.current.value;\n    const numberOfPages = pagination.numberOfPages.value;\n    const left = currentValue === numberOfPages ? numberOfPages - 3 : Math.max(0, (currentValue as number) - 2); // internal value is 1 indexed\n    const right = Math.min(left + 3, numberOfPages);\n    const pages = range(1, numberOfPages)\n      .map(number => ({\n        number,\n        isCurrent: number === currentValue\n      }))\n      .slice(left, right);\n    return pages;\n  }\n}\n\nfunction generatePaginationList(props: BPaginationProps, pagination: Pagination, themeClasses: string[]): VNode {\n  const generatePaginationListItem = getGeneratePaginationListItem(pagination, themeClasses);\n  const currentValue = pagination.current.value;\n  const numberOfPages = pagination.numberOfPages.value;\n  const nodes: VNode[] = getPageRange(props, pagination).map(generatePaginationListItem);\n  if (currentValue >= 5) {\n    nodes.unshift(ellipsis);\n  }\n  if (currentValue > 3) {\n    nodes.unshift(generatePaginationListItem({ number: 1, isCurrent: currentValue === 1 }));\n  }\n  if (currentValue < numberOfPages - 3) {\n    nodes.push(ellipsis);\n  }\n  if (currentValue < numberOfPages - 2) {\n    nodes.push(generatePaginationListItem({ number: numberOfPages, isCurrent: currentValue === numberOfPages }));\n  }\n  return h('ul', { class: 'pagination-list' }, nodes);\n}\n\nfunction generateSimpleSummary(props: BPaginationProps, pagination: Pagination): VNode {\n  return h(\n    'small',\n    { class: 'info' },\n    props.perPage === 1\n      ? `${pagination.after.value + 1} / ${props.total}`\n      : `${pagination.after.value + 1} - ${Math.min(\n          pagination.after.value + props.perPage,\n          props.total || 0\n        )} / ${props.total || 0}`\n  );\n}\n\nfunction generatePaginationControls(\n  props: BPaginationProps,\n  context: SetupContext,\n  pagination: Pagination,\n  themeClasses: string[]\n): VNode {\n  return h(\n    'section',\n    {\n      'aria-label': 'Pagination Controls',\n      class: ['pagination', props.position, props.size, { 'is-simple': props.isSimple, 'is-rounded': props.isRounded }]\n    },\n    props.isSimple\n      ? [\n          generatePreviousButton(context, pagination, themeClasses),\n          generateNextButton(context, pagination, themeClasses),\n          generateSimpleSummary(props, pagination)\n        ]\n      : [\n          generatePreviousButton(context, pagination, themeClasses),\n          generateNextButton(context, pagination, themeClasses),\n          generatePaginationList(props, pagination, themeClasses)\n        ]\n  );\n}\n\ninterface Page {\n  number: number;\n  isCurrent: boolean;\n}\n\nexport default defineComponent({\n  name: 'b-pagination',\n  props: BPaginationPropsDefinition,\n  setup(props, context) {\n    const pagination = usePagination(props);\n    const { themeClasses } = useTheme(props);\n    return () => {\n      const controls = generatePaginationControls(props, context, pagination, themeClasses.value);\n      if (props.verticalPosition === 'is-top' && context.slots.default) {\n        return h('article', [controls, context.slots.default(extractPaginationState(pagination))]);\n      }\n      if (context.slots.default) {\n        return h('article', [context.slots.default(extractPaginationState(pagination)), controls]);\n      }\n      return controls;\n    };\n  }\n});\n"],"sourceRoot":"","file":"BPagination.js"}