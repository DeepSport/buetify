{"version":3,"sources":["../../../src/components/table/BTableColumn.ts"],"names":[],"mappings":"AAAA,SAAS,CAAT,EAAY,eAAZ,EAAuC,QAAvC,QAAuD,KAAvD;AACA,OAAO,qBAAP,MAAkC,kDAAlC;AACA,OAAO,QAAP,MAAqB,qBAArB;AACA,SAAS,SAAT,EAAoB,QAApB,QAAoC,qBAApC;AACA,SAAS,wBAAT,QAAyC,gCAAzC;;AAGA,SAAS,WAAT,CAAqB,KAArB,EAA6C,MAAA,GAA8B,IAA3E,EAA+E;AAC7E,SAAO,QAAQ,CAAC,KAAD,CAAR,GAAkB,KAAlB,GAA0B,GAAG,KAAK,GAAG,MAAM,EAAlD;AACD;;AAED,SAAS,WAAT,CAAqB,QAArB,EAAyC,MAAzC,EAA8D;AAC5D,SAAO,MAAM,KAAK,SAAX,IAAwB,SAAS,CAAC,MAAM,CAAC,IAAR,CAAjC,IAAkD,MAAM,CAAC,IAAP,KAAgB,SAAlE,GACH,QADG,GAEH,MAAM,CAAC,IAAP,CAAY,QAAZ,IAAwB,QAF5B;AAGD;;AAED,eAAe,eAAe,CAAC;AAC7B,EAAA,IAAI,EAAE,gBADuB;AAE7B,EAAA,KAAK,EAAE;AACL,IAAA,MAAM,EAAE;AACN,MAAA,IAAI,EAAE,MADA;AAEN,MAAA,QAAQ,EAAE;AAFJ;AADH,GAFsB;;AAQ7B,EAAA,KAAK,CAAC,KAAD,EAAQ;AAAE,IAAA;AAAF,GAAR,EAAiB;AACpB,UAAM;AAAE,MAAA,SAAF;AAAa,MAAA,UAAb;AAAyB,MAAA,QAAzB;AAAmC,MAAA,gBAAnC;AAAqD,MAAA;AAArD,QAA6E,wBAAwB,EAA3G;AACA,UAAM,UAAU,GAAG,QAAQ,CAAC,MAAM,CAAC,CAAC,KAAK,CAAC,MAAN,CAAa,IAAtB,CAA3B;AACA,UAAM,YAAY,GAAG,QAAQ,CAAC,MAAM,SAAS,CAAC,KAAV,CAAgB,GAAhB,CAAoB,KAAK,CAAC,MAAN,CAAa,KAAjC,CAAP,CAA7B;AACA,UAAM,UAAU,GAAG,QAAQ,CAAC,MAAM,SAAS,CAAC,KAAV,CAAgB,GAAhB,CAAoB,KAAK,CAAC,MAAN,CAAa,KAAjC,CAAP,CAA3B;;AAEA,aAAS,YAAT,CAAsB,CAAtB,EAAoC;AAClC,MAAA,CAAC,IAAI,CAAC,CAAC,eAAF,EAAL;AACA,MAAA,gBAAgB,CAAC,KAAK,CAAC,MAAN,CAAa,KAAd,CAAhB;AACD;;AAED,aAAS,OAAT,GAAgB;AACd,UAAI,YAAY,CAAC,KAAjB,EAAwB;AACtB,QAAA,mBAAmB,CAAC,KAAK,CAAC,MAAN,CAAa,KAAd,CAAnB;AACD,OAFD,MAEO;AACL,QAAA,YAAY;AACb;AACF;;AACD,WAAO,MAAK;AACV,YAAM,IAAI,GAAG,KAAK,CAAC,UAAU,KAAK,CAAC,MAAN,CAAa,KAAK,EAA7B,CAAL,IAAyC,KAAK,CAAC,MAA5D;AACA,YAAM,QAAQ,GAAG,EAAjB;;AACA,UAAI,IAAJ,EAAU;AACR,QAAA,QAAQ,CAAC,IAAT,CAAc,IAAI,CAAC,KAAK,CAAC,MAAP,CAAlB;AACD,OAFD,MAEO;AACL,QAAA,QAAQ,CAAC,IAAT,CACE,QAAQ,CAAC,KAAK,CAAC,MAAN,CAAa,MAAd,CAAR,GACI,CAAC,CAAC,QAAD,EAAW;AAAE,UAAA,KAAK,EAAE,KAAK,CAAC,MAAN,CAAa,MAAtB;AAA8B,UAAA,QAAQ,EAAE;AAAxC,SAAX,EAAgE,MAAM,KAAK,CAAC,MAAN,CAAa,KAAnF,CADL,GAEI,KAAK,CAAC,MAAN,CAAa,KAHnB;AAKD;;AACD,UAAI,YAAY,CAAC,KAAjB,EAAwB;AACtB,cAAM,IAAI,GAAG,WAAW,CAAC,QAAQ,CAAC,KAAV,EAAiB,UAAU,CAAC,KAA5B,CAAxB;AACA,cAAM,IAAI,GAAG,KAAK,CAAC,WAAD,CAAL,GACT,KAAK,CAAC,WAAD,CAAL,CAAmB;AAAE,UAAA,QAAQ,EAAE;AAAZ,SAAnB,CADS,GAET,CAAC,CAAC,qBAAD,EAAwB;AACvB,UAAA,UAAU,EAAE,WAAW,CAAC,QAAQ,CAAC,KAAV,EAAiB,UAAU,CAAC,KAA5B,CAAX,KAAkD;AADvC,SAAxB,CAFL;;AAKA,YAAI,UAAU,CAAC,KAAX,IAAoB,UAAU,CAAC,KAAnC,EAA0C;AACxC,UAAA,QAAQ,CAAC,IAAT,CACE,IADF,EAEE,UAAU,CAAC,KAAX,CAAiB,SAAjB,GAA6B,CAF/B,EAGE,CAAC,CAAC,QAAD,EAAW;AACV,YAAA,KAAK,EAAE,iCADG;AAEV,YAAA,OAAO,EAAE;AAFC,WAAX,CAHH;AAQD,SATD,MASO;AACL,UAAA,QAAQ,CAAC,IAAT,CAAc,IAAd;AACD;AACF;;AACD,aAAO,CAAC,CACN,IADM,EAEN;AACE,QAAA,KAAK,EAAE;AACL,yBAAe,UAAU,CAAC,KADrB;AAEL,4BAAkB,CAAC,CAAC,KAAK,CAAC,MAAN,CAAa;AAF5B,SADT;AAKE,QAAA,OAAO,EAAE,UAAU,CAAC,KAAX,GAAmB,OAAnB,GAA6B,SALxC;AAME,QAAA,KAAK,EAAE,KAAK,CAAC,MAAN,CAAa,KAAb,KAAuB,SAAvB,GAAmC;AAAE,uBAAa,WAAW,CAAC,KAAK,CAAC,MAAN,CAAa,KAAd;AAA1B,SAAnC,GAAsF;AAN/F,OAFM,EAUN,CACE,CAAC,CACC,KADD,EAEC;AACE,QAAA,KAAK,EAAE,CAAC,SAAD,EAAY,KAAK,CAAC,MAAN,CAAa,QAAzB;AADT,OAFD,EAKC,QALD,CADH,CAVM,CAAR;AAoBD,KApDD;AAqDD;;AA/E4B,CAAD,CAA9B","sourcesContent":["import { h, defineComponent, PropType, computed } from 'vue';\nimport VerticalExpansionIcon from '../icons/verticalExpansion/VerticalExpansionIcon';\nimport BTooltip from '../tooltip/BTooltip';\nimport { isBoolean, isString } from '../../utils/helpers';\nimport { useInjectedSortableTable } from './composables/useSortableTable';\nimport { BTableColumn, SortType } from './shared';\n\nfunction formatWidth(width: string | number, suffix: 'rem' | 'em' | 'px' = 'px'): string {\n  return isString(width) ? width : `${width}${suffix}`;\n}\n\nfunction useSortType(sortType: SortType, column?: BTableColumn): SortType {\n  return column === undefined || isBoolean(column.sort) || column.sort === undefined\n    ? sortType\n    : column.sort.sortType ?? sortType;\n}\n\nexport default defineComponent({\n  name: 'b-table-column',\n  props: {\n    column: {\n      type: Object as PropType<BTableColumn>,\n      required: true\n    }\n  },\n  setup(props, { slots }) {\n    const { sortByMap, isMultiple, sortType, updateSortColumn, updateSortDirection } = useInjectedSortableTable();\n    const isSortable = computed(() => !!props.column.sort);\n    const isSortColumn = computed(() => sortByMap.value.has(props.column.label));\n    const sortColumn = computed(() => sortByMap.value.get(props.column.label));\n\n    function updateColumn(e?: MouseEvent) {\n      e && e.stopPropagation();\n      updateSortColumn(props.column.label);\n    }\n\n    function onClick() {\n      if (isSortColumn.value) {\n        updateSortDirection(props.column.label);\n      } else {\n        updateColumn();\n      }\n    }\n    return () => {\n      const slot = slots[`header.${props.column.label}`] || slots.header;\n      const children = [];\n      if (slot) {\n        children.push(slot(props.column));\n      } else {\n        children.push(\n          isString(props.column.detail)\n            ? h(BTooltip, { label: props.column.detail, position: 'is-left' }, () => props.column.label)\n            : props.column.label\n        );\n      }\n      if (isSortColumn.value) {\n        const type = useSortType(sortType.value, sortColumn.value);\n        const icon = slots['sort-icon']\n          ? slots['sort-icon']({ sortType: type })\n          : h(VerticalExpansionIcon, {\n              isExpanded: useSortType(sortType.value, sortColumn.value) === 'Ascending'\n            });\n        if (isMultiple.value && sortColumn.value) {\n          children.push(\n            icon,\n            sortColumn.value.sortIndex + 1,\n            h('button', {\n              class: 'delete is-small b-column-delete',\n              onClick: updateColumn\n            })\n          );\n        } else {\n          children.push(icon);\n        }\n      }\n      return h(\n        'th',\n        {\n          class: {\n            'is-sortable': isSortable.value,\n            'is-sticky-left': !!props.column.isSticky\n          },\n          onClick: isSortable.value ? onClick : undefined,\n          style: props.column.width !== undefined ? { 'min-width': formatWidth(props.column.width) } : undefined\n        },\n        [\n          h(\n            'div',\n            {\n              class: ['th-wrap', props.column.position]\n            },\n            children\n          )\n        ]\n      );\n    };\n  }\n});\n"],"sourceRoot":"","file":"BTableColumn.js"}