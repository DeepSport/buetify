import { constVoid } from 'fp-ts/lib/function';
import { inject, shallowRef, onUnmounted, computed } from 'vue';
import { formatTransition } from '../transition';
import { DEFAULT_NOTICE_CONTROLLER_INJECTION, NOTICE_CONTROLLER_SYMBOL } from './provideNoticeController';
export const UseNoticePropsDefinition = {
    transition: {
        type: [Object, String],
        required: false
    },
    position: {
        type: String,
        default: 'is-bottom'
    },
    duration: {
        type: Number,
        default: 2000
    },
    message: {
        type: String
    },
    shouldQueue: {
        type: Boolean,
        default: true
    },
    variant: {
        type: String,
        default: 'is-primary'
    },
    isIndefinite: {
        type: Boolean,
        default: false
    }
};
export const DEFAULT_USE_NOTICE_PROPS = {
    position: UseNoticePropsDefinition.position.default,
    duration: UseNoticePropsDefinition.duration.default,
    shouldQueue: UseNoticePropsDefinition.shouldQueue.default,
    variant: UseNoticePropsDefinition.variant.default,
    isIndefinite: UseNoticePropsDefinition.isIndefinite.default
};
function useNoticeTransition(props = DEFAULT_USE_NOTICE_PROPS) {
    return computed(() => {
        if (props.transition) {
            return formatTransition(props.transition);
        }
        else {
            switch (props.position) {
                case 'is-top-right':
                case 'is-top':
                case 'is-top-left':
                    return {
                        'enter-active-class': 'fadeInDown',
                        'leave-active-class': 'fadeOut'
                    };
                case 'is-bottom-right':
                case 'is-bottom':
                case 'is-bottom-left':
                    return {
                        'enter-active-class': 'fadeInUp',
                        'leave-active-class': 'fadeOut'
                    };
            }
        }
    });
}
export function useNoticeController(props, render) {
    const remove = shallowRef(constVoid);
    const { showNotice } = inject(NOTICE_CONTROLLER_SYMBOL, DEFAULT_NOTICE_CONTROLLER_INJECTION);
    const transition = useNoticeTransition(props);
    onUnmounted(() => {
        remove.value();
    });
    function open(options) {
        const position = options.position ?? props.position;
        remove.value();
        console.log({
            placement: position.includes('top') ? 'top' : 'bottom',
            render: render.value(options),
            transition: options.transition ?? transition.value,
            shouldQueue: options.shouldQueue ?? props.shouldQueue,
            duration: options.duration ?? props.duration
        });
        remove.value = showNotice({
            placement: position.includes('top') ? 'top' : 'bottom',
            render: render.value(options),
            transition: options.transition ?? transition.value,
            shouldQueue: options.shouldQueue ?? props.shouldQueue,
            duration: options.duration ?? props.duration
        });
    }
    return {
        open: open,
        close: () => {
            remove.value();
            remove.value = constVoid;
        }
    };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXNlTm90aWNlQ29udHJvbGxlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9jb21wb3NhYmxlcy9ub3RpY2VDb250cm9sbGVyL3VzZU5vdGljZUNvbnRyb2xsZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFNBQVMsRUFBYSxNQUFNLG9CQUFvQixDQUFDO0FBRTFELE9BQU8sRUFBRSxNQUFNLEVBQXFDLFVBQVUsRUFBRSxXQUFXLEVBQUUsUUFBUSxFQUFPLE1BQU0sS0FBSyxDQUFDO0FBSXhHLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUNqRCxPQUFPLEVBQUUsbUNBQW1DLEVBQUUsd0JBQXdCLEVBQUUsTUFBTSwyQkFBMkIsQ0FBQztBQUUxRyxNQUFNLENBQUMsTUFBTSx3QkFBd0IsR0FBRztJQUN0QyxVQUFVLEVBQUU7UUFDVixJQUFJLEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUF5QjtRQUM5QyxRQUFRLEVBQUUsS0FBSztLQUNoQjtJQUNELFFBQVEsRUFBRTtRQUNSLElBQUksRUFBRSxNQUFtQztRQUN6QyxPQUFPLEVBQUUsV0FBb0I7S0FDOUI7SUFDRCxRQUFRLEVBQUU7UUFDUixJQUFJLEVBQUUsTUFBMEI7UUFDaEMsT0FBTyxFQUFFLElBQUk7S0FDZDtJQUNELE9BQU8sRUFBRTtRQUNQLElBQUksRUFBRSxNQUEwQjtLQUNqQztJQUNELFdBQVcsRUFBRTtRQUNYLElBQUksRUFBRSxPQUE0QjtRQUNsQyxPQUFPLEVBQUUsSUFBSTtLQUNkO0lBQ0QsT0FBTyxFQUFFO1FBQ1AsSUFBSSxFQUFFLE1BQWdDO1FBQ3RDLE9BQU8sRUFBRSxZQUFxQjtLQUMvQjtJQUNELFlBQVksRUFBRTtRQUNaLElBQUksRUFBRSxPQUE0QjtRQUNsQyxPQUFPLEVBQUUsS0FBSztLQUNmO0NBQ0YsQ0FBQztBQUdGLE1BQU0sQ0FBQyxNQUFNLHdCQUF3QixHQUFtQjtJQUN0RCxR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SUFBSSxFQUFFLElBQUk7UUFDVixLQUFLLEVBQUUsR0FBRyxFQUFFO1lBQ1YsTUFBTSxDQUFDLEtBQUssRUFBRSxDQUFDO1lBQ2YsTUFBTSxDQUFDLEtBQUssR0FBRyxTQUFTLENBQUM7UUFDM0IsQ0FBQztLQUNGLENBQUM7QUFDSixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY29uc3RWb2lkLCBGdW5jdGlvbk4gfSBmcm9tICdmcC10cy9saWIvZnVuY3Rpb24nO1xuaW1wb3J0IHsgSU8gfSBmcm9tICdmcC10cy9saWIvSU8nO1xuaW1wb3J0IHsgaW5qZWN0LCBQcm9wVHlwZSwgRXh0cmFjdFByb3BUeXBlcywgVk5vZGUsIHNoYWxsb3dSZWYsIG9uVW5tb3VudGVkLCBjb21wdXRlZCwgUmVmIH0gZnJvbSAndnVlJztcbmltcG9ydCB7IEFsbENvbG9yc1ZhcmlhbnQsIENvbG9yVmFyaWFudCB9IGZyb20gJy4uLy4uL3R5cGVzL0NvbG9yVmFyaWFudHMnO1xuaW1wb3J0IHsgUG9zaXRpb25WYXJpYW50IH0gZnJvbSAnLi4vLi4vdHlwZXMvUG9zaXRpb25WYXJpYW50JztcbmltcG9ydCB7IFRyYW5zaXRpb24sIFRyYW5zaXRpb25DbGFzc2VzIH0gZnJvbSAnLi4vLi4vdHlwZXMvVHJhbnNpdGlvbic7XG5pbXBvcnQgeyBmb3JtYXRUcmFuc2l0aW9uIH0gZnJvbSAnLi4vdHJhbnNpdGlvbic7XG5pbXBvcnQgeyBERUZBVUxUX05PVElDRV9DT05UUk9MTEVSX0lOSkVDVElPTiwgTk9USUNFX0NPTlRST0xMRVJfU1lNQk9MIH0gZnJvbSAnLi9wcm92aWRlTm90aWNlQ29udHJvbGxlcic7XG5cbmV4cG9ydCBjb25zdCBVc2VOb3RpY2VQcm9wc0RlZmluaXRpb24gPSB7XG4gIHRyYW5zaXRpb246IHtcbiAgICB0eXBlOiBbT2JqZWN0LCBTdHJpbmddIGFzIFByb3BUeXBlPFRyYW5zaXRpb24+LFxuICAgIHJlcXVpcmVkOiBmYWxzZVxuICB9LFxuICBwb3NpdGlvbjoge1xuICAgIHR5cGU6IFN0cmluZyBhcyBQcm9wVHlwZTxQb3NpdGlvblZhcmlhbnQ+LFxuICAgIGRlZmF1bHQ6ICdpcy1ib3R0b20nIGFzIGNvbnN0XG4gIH0sXG4gIGR1cmF0aW9uOiB7XG4gICAgdHlwZTogTnVtYmVyIGFzIFByb3BUeXBlPG51bWJlcj4sXG4gICAgZGVmYXVsdDogMjAwMFxuICB9LFxuICBtZXNzYWdlOiB7XG4gICAgdHlwZTogU3RyaW5nIGFzIFByb3BUeXBlPHN0cmluZz5cbiAgfSxcbiAgc2hvdWxkUXVldWU6IHtcbiAgICB0eXBlOiBCb29sZWFuIGFzIFByb3BUeXBlPGJvb2xlYW4+LFxuICAgIGRlZmF1bHQ6IHRydWVcbiAgfSxcbiAgdmFyaWFudDoge1xuICAgIHR5cGU6IFN0cmluZyBhcyBQcm9wVHlwZTxDb2xvclZhcmlhbnQ+LFxuICAgIGRlZmF1bHQ6ICdpcy1wcmltYXJ5JyBhcyBjb25zdFxuICB9LFxuICBpc0luZGVmaW5pdGU6IHtcbiAgICB0eXBlOiBCb29sZWFuIGFzIFByb3BUeXBlPGJvb2xlYW4+LFxuICAgIGRlZmF1bHQ6IGZhbHNlXG4gIH1cbn07XG5leHBvcnQgaW50ZXJmYWNlIFVzZU5vdGljZVByb3BzIGV4dGVuZHMgRXh0cmFjdFByb3BUeXBlczx0eXBlb2YgVXNlTm90aWNlUHJvcHNEZWZpbml0aW9uPiB7fVxuXG5leHBvcnQgY29uc3QgREVGQVVMVF9VU0VfTk9USUNFX1BST1BTOiBVc2VOb3RpY2VQcm9wcyA9IHtcbiAgcG9zaXRpb246IFVzZU5vdGljZVByb3BzRGVmaW5pdGlvbi5wb3NpdGlvbi5kZWZhdWx0LFxuICBkdXJhdGlvbjogVXNlTm90aWNlUHJvcHNEZWZpbml0aW9uLmR1cmF0aW9uLmRlZmF1bHQsXG4gIHNob3VsZFF1ZXVlOiBVc2VOb3RpY2VQcm9wc0RlZmluaXRpb24uc2hvdWxkUXVldWUuZGVmYXVsdCxcbiAgdmFyaWFudDogVXNlTm90aWNlUHJvcHNEZWZpbml0aW9uLnZhcmlhbnQuZGVmYXVsdCxcbiAgaXNJbmRlZmluaXRlOiBVc2VOb3RpY2VQcm9wc0RlZmluaXRpb24uaXNJbmRlZmluaXRlLmRlZmF1bHRcbn07XG5cbmZ1bmN0aW9uIHVzZU5vdGljZVRyYW5zaXRpb24ocHJvcHM6IFVzZU5vdGljZVByb3BzID0gREVGQVVMVF9VU0VfTk9USUNFX1BST1BTKTogUmVmPFRyYW5zaXRpb25DbGFzc2VzPiB7XG4gIHJldHVybiBjb21wdXRlZCgoKSA9PiB7XG4gICAgaWYgKHByb3BzLnRyYW5zaXRpb24pIHtcbiAgICAgIHJldHVybiBmb3JtYXRUcmFuc2l0aW9uKHByb3BzLnRyYW5zaXRpb24pO1xuICAgIH0gZWxzZSB7XG4gICAgICBzd2l0Y2ggKHByb3BzLnBvc2l0aW9uKSB7XG4gICAgICAgIGNhc2UgJ2lzLXRvcC1yaWdodCc6XG4gICAgICAgIGNhc2UgJ2lzLXRvcCc6XG4gICAgICAgIGNhc2UgJ2lzLXRvcC1sZWZ0JzpcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgJ2VudGVyLWFjdGl2ZS1jbGFzcyc6ICdmYWRlSW5Eb3duJyxcbiAgICAgICAgICAgICdsZWF2ZS1hY3RpdmUtY2xhc3MnOiAnZmFkZU91dCdcbiAgICAgICAgICB9O1xuICAgICAgICBjYXNlICdpcy1ib3R0b20tcmlnaHQnOlxuICAgICAgICBjYXNlICdpcy1ib3R0b20nOlxuICAgICAgICBjYXNlICdpcy1ib3R0b20tbGVmdCc6XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICdlbnRlci1hY3RpdmUtY2xhc3MnOiAnZmFkZUluVXAnLFxuICAgICAgICAgICAgJ2xlYXZlLWFjdGl2ZS1jbGFzcyc6ICdmYWRlT3V0J1xuICAgICAgICAgIH07XG4gICAgICB9XG4gICAgfVxuICB9KTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBSZW5kZXJOb3RpY2VPcHRpb25zIHtcbiAgdmFyaWFudD86IEFsbENvbG9yc1ZhcmlhbnQ7XG4gIG1lc3NhZ2U/OiBzdHJpbmc7XG4gIHBvc2l0aW9uPzogUG9zaXRpb25WYXJpYW50O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE9wZW5Ob3RpY2VPcHRpb25zIGV4dGVuZHMgUmVuZGVyTm90aWNlT3B0aW9ucyB7XG4gIGR1cmF0aW9uPzogbnVtYmVyO1xuICBzaG91bGRRdWV1ZT86IGJvb2xlYW47XG4gIHRyYW5zaXRpb24/OiBUcmFuc2l0aW9uO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXNlTm90aWNlQ29udHJvbGxlcihwcm9wczogVXNlTm90aWNlUHJvcHMsIHJlbmRlcjogUmVmPEZ1bmN0aW9uTjxbUmVuZGVyTm90aWNlT3B0aW9uc10sIElPPFZOb2RlW10+Pj4pIHtcbiAgY29uc3QgcmVtb3ZlID0gc2hhbGxvd1JlZihjb25zdFZvaWQpO1xuICBjb25zdCB7IHNob3dOb3RpY2UgfSA9IGluamVjdChOT1RJQ0VfQ09OVFJPTExFUl9TWU1CT0wsIERFRkFVTFRfTk9USUNFX0NPTlRST0xMRVJfSU5KRUNUSU9OKTtcbiAgY29uc3QgdHJhbnNpdGlvbiA9IHVzZU5vdGljZVRyYW5zaXRpb24ocHJvcHMpO1xuICBvblVubW91bnRlZCgoKSA9PiB7XG4gICAgcmVtb3ZlLnZhbHVlKCk7XG4gIH0pO1xuICBmdW5jdGlvbiBvcGVuKG9wdGlvbnM6IE9wZW5Ob3RpY2VPcHRpb25zKSB7XG4gICAgY29uc3QgcG9zaXRpb24gPSBvcHRpb25zLnBvc2l0aW9uID8/IHByb3BzLnBvc2l0aW9uO1xuICAgIHJlbW92ZS52YWx1ZSgpO1xuICAgIGNvbnNvbGUubG9nKHtcbiAgICAgIHBsYWNlbWVudDogcG9zaXRpb24uaW5jbHVkZXMoJ3RvcCcpID8gJ3RvcCcgOiAnYm90dG9tJyxcbiAgICAgIHJlbmRlcjogcmVuZGVyLnZhbHVlKG9wdGlvbnMpLFxuICAgICAgdHJhbnNpdGlvbjogb3B0aW9ucy50cmFuc2l0aW9uID8/IHRyYW5zaXRpb24udmFsdWUsXG4gICAgICBzaG91bGRRdWV1ZTogb3B0aW9ucy5zaG91bGRRdWV1ZSA/PyBwcm9wcy5zaG91bGRRdWV1ZSxcbiAgICAgIGR1cmF0aW9uOiBvcHRpb25zLmR1cmF0aW9uID8/IHByb3BzLmR1cmF0aW9uXG4gICAgfSk7XG4gICAgcmVtb3ZlLnZhbHVlID0gc2hvd05vdGljZSh7XG4gICAgICBwbGFjZW1lbnQ6IHBvc2l0aW9uLmluY2x1ZGVzKCd0b3AnKSA/ICd0b3AnIDogJ2JvdHRvbScsXG4gICAgICByZW5kZXI6IHJlbmRlci52YWx1ZShvcHRpb25zKSxcbiAgICAgIHRyYW5zaXRpb246IG9wdGlvbnMudHJhbnNpdGlvbiA/PyB0cmFuc2l0aW9uLnZhbHVlLFxuICAgICAgc2hvdWxkUXVldWU6IG9wdGlvbnMuc2hvdWxkUXVldWUgPz8gcHJvcHMuc2hvdWxkUXVldWUsXG4gICAgICBkdXJhdGlvbjogb3B0aW9ucy5kdXJhdGlvbiA/PyBwcm9wcy5kdXJhdGlvblxuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBvcGVuOiBvcGVuLFxuICAgIGNsb3NlOiAoKSA9PiB7XG4gICAgICByZW1vdmUudmFsdWUoKTtcbiAgICAgIHJlbW92ZS52YWx1ZSA9IGNvbnN0Vm9pZDtcbiAgICB9XG4gIH07XG59XG5cbmV4cG9ydCB0eXBlIE5vdGljZUNvbnRyb2xsZXIgPSBSZXR1cm5UeXBlPHR5cGVvZiB1c2VOb3RpY2VDb250cm9sbGVyPjtcbiJdfQ==